<!DOCTYPE html>
<html lang="en">
<head>
<title>个人设置</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../css/bootstrap-responsive.min.css" />
    <link rel="stylesheet" href="../css/datepicker.css" />
    <link rel="stylesheet" href="../css/uniform.css" />
    <link rel="stylesheet" href="../css/unicorn.main.css" />
    <link rel="stylesheet" href="../css/unicorn.grey.css" class="skin-color" />
    <link rel="stylesheet" href="../css/bootstrap-fileupload.css"/>
    <link href="../css/jquery.fancybox.css" rel="stylesheet" />
	<link href="../css/chosen.css" rel="stylesheet" type="text/css"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
	<div id="header">
		<h1>
			<a href="index.html">首頁</a>
		</h1>
	</div>

	<div id="search">
		<input type="text" placeholder="Search here..." />
		<button type="submit" class="tip-right" title="Search">
			<i class="icon-search icon-white"></i>
		</button>
	</div>
	<div id="user-nav" class="navbar navbar-inverse">
		<ul class="nav btn-group">
			<li class="btn btn-inverse"><a title="" href="#"><i
					class="icon icon-user"></i> <span class="text">我的账号</span></a></li>
			<li class="btn btn-inverse"><a title="" href="Login_logOut"><i
					class="icon icon-share-alt"></i> <span class="text">退出</span></a></li>
		</ul>
	</div>
	<!--侧边导航栏-->
	<div id="sidebar">
		<a href="#" class="visible-phone"><i class="icon icon-th-list"></i>
			Common Elements</a>
		<ul>
			<li><a href="index.html"><i class="icon icon-home"></i> <span>首页</span></a></li>
			<li class="submenu"><a href="#"><i class="icon icon-user"></i>
					<span>用户管理</span></a>
				<ul>
					<li><a href="User_add.html">添加用户</a></li>
					<li><a href="User_list.html">用户列表</a></li>
				</ul></li>
			<!--
                <li class="submenu">
                	<a href="buttons.html"><i class="icon icon-tint"></i> <span>Logo管理</span> <span class="label">2</span></a>
                    <ul>
						<li><a href="Logo_manage.html">添加Logo</a></li>
                        <li><a href="User_list.html">用户列表</a></li>
					</ul>
                </li> -->
				<li class="submenu">
					<a href="#"><i class="icon icon-volume-up"></i> <span>通知管理</span> </a>
					<ul>
						<li><a href="Notice_add.html">发布通知</a></li>
                        <li><a href="Notice_list.html">通知列表</a></li>
					</ul>
				</li>
                
                <li class="submenu">
					<a href="#"><i class="icon icon-pencil"></i> <span>日志管理</span> </a>
					<ul>
						<li><a href="adminlog_list.html">管理员日志</a></li>
					</ul>
				</li>
		</ul>

	</div>
	<!--侧边导航栏-->

	<!--页面内容部分-->
	<div id="content">
		<div id="content-header">
			<h1>个人信息</h1>
			
		</div>
		<div id="breadcrumb">
			<a href="index.html" title="Go to Home" class="tip-bottom"><i
				class="icon-home"></i> Home</a> <a href="#" class="tip-bottom">个人设置</a>
		</div>

		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span12">
					<div class="widget-box">

						<div class="widget-title">
							<span class="icon"> <i class="icon-align-justify"></i>
							</span>
							<h5>个人设置</h5>
						</div>
						<div class="widget-box">
							<div class="widget-title">
								<ul class="nav nav-tabs">
									<li class="active"><a data-toggle="tab" href="#tab1">账号信息</a></li>
									<li><a data-toggle="tab" href="#tab2">密码设置</a></li>
									<li><a data-toggle="tab" href="#tab3">头像</a></li>
								</ul>
							</div>
							<div class="widget-content tab-content">
								<!-- 个人信息开始-->
								<div id="tab1" class="tab-pane active">

									<div class="widget-content nopadding">

										<form id="updateform" class="form-horizontal" />

										<div class="control-group">
											<label class="control-label">手机号</label>
											<div class="controls">
                                            	<input type="hidden" id="userId" name="user.id" placeholder="用户id"/>	
												<input id="phone" type="text" name="user.phone"
													placeholder="输入11位手机号..." />
											</div>
										</div>
										<div class="control-group">
											<label class="control-label">姓名</label>
											<div class="controls">
												<input id="realName" type="text" name="user.realName"
													placeholder="输入姓名..." />
											</div>
										</div>
										<div class="control-group">
											<label class="control-label">年龄</label>
											<div class="controls">
												<input id="age" type="text" name="user.age"
													placeholder="您的年龄..." />
											</div>
										</div>
										<div class="control-group">
											<label class="control-label">性别</label>
											<div class="controls">
												
                                                <select id="sex" name="user.sex">
                                                	<option id="kong" value="空"/>
                                                    <option id="man" value="男"/>男
                                                    <option id="woman" value="女" />女
                                                </select>
											</div>
										</div>

										<div class="control-group">
											<label class="control-label">邮箱</label>
											<div class="controls">
												<input id="email" type="text" name="user.email"
													placeholder="您的email地址..." />
												<!--<span class="help-block">This is a description</span>-->
											</div>
										</div>
										<div class="control-group">
											<label class="control-label">地址</label>
											<div class="controls">
												<input id="address" type="text" name="user.address"
													placeholder="您的居住地址..." />
											</div>
										</div>
										<div class="control-group">
											<label class="control-label">籍贯</label>
											<div class="controls">
												<input id="nativePlace" type="text" name="user.nativePlace"
													placeholder="您的籍贯..." />
											</div>
										</div>
										<div class="control-group">
											<label class="control-label">爱好</label>
											<div class="controls">
												<input id="hobby" type="text" name="user.hobby"
													placeholder="您的爱好..." />
											</div>
										</div>

										<!--
                                                <div class="control-group">
                                                    <label class="control-label">爱好</label>
                                                    <div class="controls">
                                                        <textarea></textarea>
                                                    </div>
                                                </div>  -->
										<div class="form-actions">
											<button id="profile" type="submit" class="btn btn-primary">保存修改</button>
										</div>
										</form>
									</div>
								</div>
								<!-- 个人信息结束-->

								<!-- 密码设置开始-->
								<div id="tab2" class="tab-pane">
									<div class="widget-content nopadding">
										<form id="form-wizard" class="form-horizontal" />
										<div id="form-wizard-1" class="step">
											<div class="control-group">
												<label class="control-label">原密码</label>
												<div class="controls">
													<input id="password" type="password" name="userForm.password" />
												</div>
											</div>
											<div class="control-group">
												<label class="control-label">新密码</label>
												<div class="controls">
													<input id="newPassword" type="password" name="userForm.newPassword" />
												</div>
											</div>
											<div class="control-group">
												<label class="control-label">确认密码</label>
												<div class="controls">
													<input id="reNewPassword" type="password"
														name="userForm.reNewPassword" />
												</div>
											</div>

										</div>

										<div class="form-actions">
                                        	<input id="next" class="btn btn-primary"
												type="submit" value="修改" />
											<input id="back" class="btn btn-primary" type="reset"
												value="重置" /> 
											<div id="status"></div>
										</div>

										</form>
									</div>

								</div>
								<!-- 密码设置结束-->
                                
                                <!-- 头像设置开始-->
								<div id="tab3" class="tab-pane">
									<form id="photoform" class="form-horizontal" enctype="multipart/form-data" />
                                        <div class="control-group">
                                            <label class="control-label">头像上传</label>
                                            <div class="controls">
                                                <div class="fileupload fileupload-new" data-provides="fileupload">
                                                    <ul class="thumbnails">
                                                        <li class="span2">
                                                            <div class="fileupload-new thumbnail" style="width: 200px; height: 150px;">
                                                                <div class="item">
                                                                    <a id="photoHref" class="fancybox-button" data-rel="fancybox-button" title="点击查看大图" href="">
                                                                        <div class="zoom">
                                                                            <img id="photo" src="" alt="" />                    
                                                                            <div class="zoom-icon"></div>
                                                                        </div>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                            <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;"></div>
                                                           
                                                        </li>
                                                    </ul>
        
                                                    <div class="input-append">  
                                                       <input type="file" id="file" name="file">
                                                       <Button type="submit" onclick="return ajaxFileUpload();">上传</Button>
                                                    </div>
                                                </div>
                                                 <div id="loading" class="progress progress-striped active" style="display:none">
                                                    <div style="width: 80%;" class="bar"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                
                                
                                <!-- 头像设置结束-->
							</div>
						</div>
					</div>
				</div>

				<div class="row-fluid">
					<div id="footer" class="span12">
						2015 &copy; <a href="https://"></a>
					</div>
				</div>
			</div>
		</div>

		 <script type="text/javascript" src="../js/jquery-1.11.3.min.js"></script>
    <script src="../js/jquery-migrate-1.2.1.min.js"></script>
		 <script src="../js/jquery.ui.custom.js"></script>
		 <script src="../js/bootstrap.min.js"></script>
		 <script src="../js/bootstrap-datepicker.js"></script>
		 <script src="../js/jquery.uniform.js"></script>
		 <script src="../js/select2.min.js"></script>
		 <script src="../js/unicorn.js"></script>/
		 <script src="../js/ajaxfileupload.js"></script>
         <script src="../js/bootstrap-fileupload.js"></script>
         <script src="../js/sea.profile.js"></script>
         <script src="../js/jquery.validate.js"></script>
         <script src="../js/jquery.form.js"></script>
         <script src="../js/jquery.fancybox.pack.js"></script>   
		 <script src="../js/app.js"></script>   
		 <script src="../js/gallery.js"></script>  
      
		<script>
			function ajaxFileUpload() { 
				var id =$("#userId").val();
				$("#loading")
					.ajaxStart(function(){
						$(this).show();
					})//开始上传文件时显示一个图片
					.ajaxComplete(function(){
						$(this).hide();
					});//文件上传完成将图片隐藏起来
					
					$.ajaxFileUpload
					({
						url:'../admin/fileUpload_photoUpload',//用于文件上传的服务器端请求地址
						secureuri:false,//一般设置为false
						data:{"userId":id,"uploadType":"USER_PHOTO_PATH"},
						fileElementId:'file',//文件上传空间的id属性  <input type="file" id="file" name="file" />
						dataType: 'json',//返回值类型 一般设置为json
						success: function (data, status)  //服务器成功响应处理函数
						{
							//从服务器返回的json中取出message中的数据,其中message为在struts2中定义的成员变量
							alert(data.message);
						},
						error: function (data, status, e)//服务器响应失败处理函数
						{
							alert(e);
						}
					})
					return false;
			};
		
			// Form Validation
			$("#updateform").validate({
					rules:{
						"user.phone":{
							required:true,
							number:true,
							minlength:11,
							maxlength:15
						},
						
						"user.email":{
							email: true
						},
						"user.age":{
							number: true
						}
					},
					errorClass: "help-inline",
					errorElement: "span",
					highlight:function(element, errorClass, validClass) {
						$(element).parents('.control-group').addClass('error');
					},
					unhighlight: function(element, errorClass, validClass) {
						$(element).parents('.control-group').removeClass('error');
						$(element).parents('.control-group').addClass('success');
					},
					 submitHandler: function(form) {
						$("#updateform").ajaxSubmit({
							url: 'admin/User_updateProfile',
							type: 'post',
							dataType: 'text',
							data: $("#useradd").serialize(),
							success: function (data) {
								alert(data);
							}
						});
						return false;
					 }
				});
			$("#form-wizard").validate({
					rules:{
						"userForm.password":{
							required:true
						},
						"userForm.newPassword":{
							required:true,
							minlength:6,
							maxlength:20
						},
						"userForm.reNewPassword":{
							required:true,
							minlength:6,
							maxlength:20,
							equalTo:"#newPassword"
						}
					},
					errorClass: "help-inline",
					errorElement: "span",
					highlight:function(element, errorClass, validClass) {
						$(element).parents('.control-group').addClass('error');
					},
					unhighlight: function(element, errorClass, validClass) {
						$(element).parents('.control-group').removeClass('error');
						$(element).parents('.control-group').addClass('success');
					},
					 submitHandler: function(form) {
						$("#form-wizard").ajaxSubmit({
							url: 'admin/User_updatePassword',
							type: 'post',
							dataType: 'text',
							data: $("#adminform").serialize(),
							success: function (data) {
								alert(data);
							}
						});
						return false;
					 }
				});
        </script>
</body>
</html>
