<!DOCTYPE html>
<html lang="en">
	<head>
		<title>添加用户</title>
		<meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="../css/bootstrap.min.css" />
		<link rel="stylesheet" href="../css/bootstrap-responsive.min.css" />
        <link rel="stylesheet" href="../css/colorpicker.css" />
        <link rel="stylesheet" href="../css/datepicker.css" />
		<link rel="stylesheet" href="../css/uniform.css" />
		<link rel="stylesheet" href="../css/select2.css" />		
		<link rel="stylesheet" href="../css/unicorn.main.css" />
		<link rel="stylesheet" href="../css/unicorn.grey.css" class="skin-color" />	
        <link rel="stylesheet" href="../css/bootstrap-fileupload.css"/>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   		
    </head>
	<body>
		
		
		<div id="header">
			<h1><a href="dashboard.html">首頁</a></h1>		
		</div>
		
		<div id="search">
			<input type="text" placeholder="Search here..." /><button type="submit" class="tip-right" title="Search"><i class="icon-search icon-white"></i></button>
		</div>
		<div id="user-nav" class="navbar navbar-inverse">
            <ul class="nav btn-group">
                <li class="btn btn-inverse"><a title="我的账号" href="User_profile.html"><i class="icon icon-user"></i> <span class="text">我的账号</span></a></li>
                <li class="btn btn-inverse"><a title="" href="Login_logOut"><i class="icon icon-share-alt"></i> <span class="text">退出</span></a></li>
            </ul>
        </div>
            
		<div id="sidebar">
			
			<ul>
				<li><a href="Super_index.html"><i class="icon icon-home"></i> <span>首页</span></a></li>
				<li class="submenu active open">
					<a href="Super_User_list.html"><i class="icon icon-user"></i> <span>用户管理</span> </a>
					<ul>
					
                        <li><a href="Super_User_list.html">用户列表</a></li>
					</ul>
				</li>
				<!--
                <li class="submenu">
                	<a href="buttons.html"><i class="icon icon-tint"></i> <span>Logo管理</span> <span class="label">2</span></a>
                    <ul>
						<li><a href="Logo_manage.html">添加Logo</a></li>
                        <li><a href="User_list.html">用户列表</a></li>
					</ul>
                </li> -->
				<li>
					<a href="Super_Notice_list.html"><i class="icon icon-volume-up"></i> <span>公告通知</span> </a>
				</li>
                
                <li>
					<a href="Super_Adminlog_list.html"><i class="icon icon-pencil"></i> <span>日志管理</span> </a>
				</li>
			</ul>
		
		</div>
		
		<div id="content">
			<div id="content-header">
				<h1>修改用户信息</h1>
			</div>
			<div id="breadcrumb">
				<a href="../Super_index.html" title="Go to Home" class="tip-bottom"><i class="icon-home"></i> 首頁</a>
				<a href="#" class="tip-bottom">用户管理</a>
				<a href="#" class="current">修改用户信息</a>
			</div>
			<div class="container-fluid">
				<div class="row-fluid">
					<div class="span12">
						<div class="widget-box">
							<div class="widget-title">
								<span class="icon">
									<i class="icon-align-justify"></i>									
								</span>
								<h5>修改用户信息</h5>
							</div>
							<div class="widget-content nopadding">
								<form id="updateform" method="post" action="User_update"
											class="form-horizontal" />

                                    <div class="control-group">
                                        <label class="control-label">手机号</label>
                                        <div class="controls">
                                            <input id="phone" type="text" name="user.phone"
                                                placeholder="输入11位手机号..." />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">姓名</label>
                                        <div class="controls">
                                            <input id="realName" type="text" name="user.realName"
                                                placeholder="输入姓名..." />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">年龄</label>
                                        <div class="controls">
                                            <input id="age" type="text" name="user.age"
                                                placeholder="您的年龄..." />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">性别</label>
                                        <div class="controls">
											<select id="sex" name="user.sex">
												<option id="man" value="男"/>男
												<option id="woman" value="女" />女
											</select>
										</div>
                                    </div>
                                    

                                    <div class="control-group">
                                        <label class="control-label">车牌号</label>
                                        <div class="controls">
                                            <input id="carID" type="text" name="user.carID"
                                                placeholder="您的车牌号..." />
                                            <!--<span class="help-block">This is a description</span>-->
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">居住地址</label>
                                        <div class="controls">
                                            <input id="address" type="text" name="user.address"
                                                placeholder="您的居住地址..." />
                                        </div>
                                    </div>
                                  
									<div class="control-group">
										<label class="control-label">证件</label>
										<div class="controls">
    
                                            <div class="fileupload fileupload-new" data-provides="fileupload">
    
                                                <ul class="thumbnails">
                                                    <li class="span2">
                                                        <div class="fileupload-new thumbnail" style="width: 200px; height: 150px;">
                                                            <img id="photo" src="" alt="" />
                                                        </div>
                                                        <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;"></div>
                                                    </li>
                                                </ul>
    
                                                <div class="input-append">  
                                                   <input type="file" id="file" name="file">
                                                 
                                                </div>
                                            </div>
                                            <div id="loading" class="progress progress-striped active" style="display:none">
                                                <div style="width: 80%;" class="bar"></div>
                                            </div>
									</div>  
									<div class="form-actions">
										<button type="submit" class="btn btn-primary" onclick="return ajaxFileUpload();">保存</button>
									</div>
                                    
								</form>
							</div>
						</div>						
					</div>
				</div>

				<div class="row-fluid">
					<div id="footer" class="span12">
						2015 &copy; <a href="https://"></a>
					</div>
				</div>
			</div>
		</div>
		
             <script src="../js/jquery.min.js"></script>
             <script src="../js/jquery.ui.custom.js"></script>
             <script src="../js/bootstrap.min.js"></script>
             <script src="../js/bootstrap-colorpicker.js"></script>
             <script src="../js/bootstrap-datepicker.js"></script>
             <script src="../js/jquery.uniform.js"></script>
             <script src="../js/select2.min.js"></script>
             <script src="../js/unicorn.js"></script>
             <script src="../js/unicorn.form_common.js"></script>
             <script src="../js/ajaxfileupload.js"></script>
         	 <script src="../js/bootstrap-fileupload.js"></script>
             <script>
			 	$(document).ready(function(){ 
				$(function(){ 
					var Request = new Object();  
					//获取url中的参数  
					Request = GetRequest();  
			
					var id=Request['userId'];   
				
					$.ajax({ 
						url:"admin/User_edit", 
						data: {userId:id},
						type:"post", 
						dataType:"json", 
						async:false,
						 success:function(data){
								$("#phone").val(data.phone);
								$("#realName").val(data.realName);
								$("#age").val(data.age);
								$("#sex").val(data.sex);
								if(data.sex=="男"){
									$("#sex option:selected").attr("value","男").attr("text","男");
								} else if(data.sex=="女"){
									$("#sex option:selected").attr("value","女").attr("text","女");
								}
								$("#carID").val(data.carID);
								$("#address").val(data.address);
								$("#power").val(data.power);
								if(data.idPhoto=='' || null==data.idPhoto){
									$("#photo").attr("src","../img/photo.jpg");
								}else {
									$("#photo").attr("src",'..'+data.idPhoto);
								}
							},
							error:function(){
								alert("登录超时，请重新登录！");
							}
					}); 
					
					
				});
				$("#return").click(function(){
					window.location.href="User_list.html";
				});
			
			});
			
			function GetRequest() {  
				//url例子：XXX.aspx?ID=" + ID + "&Name=" + Name；  
				var url = location.search; //获取url中"?"符以及其后的字串  
				var theRequest = new Object();  
				if(url.indexOf("?") != -1)//url中存在问号，也就说有参数。  
				{   
				  var str = url.substr(1);  
					strs = str.split("&");  
				  for(var i = 0; i < strs.length; i ++)  
					{   
					 theRequest[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1]);  
					}  
				}  
				return theRequest;  
			}  
			
			 function ajaxFileUpload() { 
				var Request = new Object();  ajaxFileUpload
					//获取url中的参数  
				Request = GetRequest();  
				
				$("#loading")
					.ajaxStart(function(){
						$(this).show();
					})//开始上传文件时显示一个图片
					.ajaxComplete(function(){
						$(this).hide();
					});//文件上传完成将图片隐藏起来
					
					$.ajaxFileUpload
					({
						url:'../admin/fileUpload_UploaIdImage',//用于文件上传的服务器端请求地址
						
						secureuri:false,//一般设置为false
						data:{"userId":Request['userId'],"uploadType":"USER_IDPhoto_PATH"},
						fileElementId:'file',//文件上传空间的id属性  <input type="file" id="file" name="file" />
						dataType: 'json',//返回值类型 一般设置为json
						success: function (data, status)  //服务器成功响应处理函数
						{
							//从服务器返回的json中取出message中的数据,其中message为在struts2中定义的成员变量
							alert(data.message);
						},
						error: function (data, status, e)//服务器响应失败处理函数
						{
							alert(data);
							alert(e);
						}
					})
					return false;
			}
             </script>
	</body>
</html>
